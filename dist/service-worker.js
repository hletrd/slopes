const CACHE_NAME="slopes-cam-v4",urlsToCache=["./","./index.html","./main.css","./pwa.js","./manifest.json","./favicon.ico","./icons/skiing-16x16.png","./icons/skiing-32x32.png","./icons/skiing-64x64.png","./icons/skiing-128x128.png","./icons/skiing-180x180.png","./icons/skiing-192x192.png","./icons/skiing-512x512.png","./icons/skiing-maskable-192x192.png","./icons/skiing-maskable-512x512.png","./preview.png","./vivaldi.html","./WespJSSDKEncV4.min.js","./links.json","./weather.json"],externalResources=["https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css","https://cdn.jsdelivr.net/npm/video.js@8.22.0/dist/video-js.min.css","https://cdn.jsdelivr.net/npm/@videojs/themes@1/dist/forest/index.css","https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css","https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js","https://cdn.jsdelivr.net/npm/video.js@8.22.0/dist/video.min.js","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"],isLocalhost="localhost"===self.location.hostname||"127.0.0.1"===self.location.hostname;self.addEventListener("install",(e=>{isLocalhost||e.waitUntil(caches.open(CACHE_NAME).then((e=>(console.log("Opened cache"),e.addAll(urlsToCache).then((()=>Promise.allSettled(externalResources.map((s=>fetch(s,{mode:"no-cors"}).then((n=>e.put(s,n))).catch((e=>{console.warn(`Failed to cache external resource: ${s}`,e)})))))))))))})),self.addEventListener("fetch",(e=>{if(isLocalhost)return;const s=new URL(e.request.url);s.hostname.includes("googletagmanager.com")||s.hostname.includes("google-analytics.com")||s.hostname.includes("ghbtns.com")||e.respondWith(caches.match(e.request).then((n=>n||fetch(e.request.clone()).then((n=>{if(!n||200!==n.status)return n;if(s.origin===self.location.origin||externalResources.includes(e.request.url)||e.request.url.endsWith(".json")||e.request.url.includes("font")||e.request.url.includes(".woff")||e.request.url.includes(".woff2")||e.request.url.endsWith(".css")||e.request.url.endsWith(".js")||e.request.url.endsWith(".png")||e.request.url.endsWith(".jpg")||e.request.url.endsWith(".svg")){const s=n.clone();caches.open(CACHE_NAME).then((n=>{n.put(e.request,s)}))}return n})).catch((s=>(console.log("Fetch failed:",s),caches.match(e.request)))))))})),self.addEventListener("activate",(e=>{const s=isLocalhost?[]:[CACHE_NAME];e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(-1===s.indexOf(e))return caches.delete(e)}))))))})),self.addEventListener("message",(e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}));